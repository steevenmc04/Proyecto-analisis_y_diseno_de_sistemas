<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="register-page">
    <div class="register-container">
        <div class="register-card">
            <div class="register-header">
                <div class="logo-container">
                    <div class="logo-icon">
                        <img src="images/logo.png" alt="Logo Corporal Gym" width="60" height="60">
                    </div>
                    <h1>Corporal Gym</h1>
                </div>
                <h2>Crear Cuenta</h2>
            </div>
            
            <form id="registerForm" class="register-form">
                <div class="form-group">
                    <label for="nombre" class="form-label">Nombre Completo</label>
                    <div class="input-container">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="#9CA3AF"/>
                        </svg>
                        <input type="text" id="nombre" placeholder="Ingresa tu nombre completo" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="cedula" class="form-label">Cédula</label>
                    <div class="input-container">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#9CA3AF"/>
                        </svg>
                        <input type="text" id="cedula" placeholder="Ingresa tu número de cédula" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="form-label">Email</label>
                    <div class="input-container">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z" fill="#9CA3AF"/>
                        </svg>
                        <input type="email" id="email" placeholder="Ingresa tu email" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="password" class="form-label">Contraseña</label>
                    <div class="input-container">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 8H17V6C17 3.24 14.76 1 12 1C9.24 1 7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8ZM12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17ZM15.1 8H8.9V6C8.9 4.29 10.29 2.9 12 2.9C13.71 2.9 15.1 4.29 15.1 6V8Z" fill="#9CA3AF"/>
                        </svg>
                        <input type="password" id="password" placeholder="Crea una contraseña" required>
                    </div>
                </div>
                

                
                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms" required>
                        <span class="checkmark"></span>
                        Acepto los términos y condiciones
                    </label>
                </div>
                
                <button type="submit" class="register-button">
                    <span>Crear Cuenta</span>
                    <svg class="button-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/>
                    </svg>
                </button>
            </form>
            
            <div class="register-footer">
                <p>¿Ya tienes una cuenta? <a href="login.html" class="login-link">Inicia sesión aquí</a></p>
            </div>
        </div>
        
        <div class="register-background">
            <div class="background-pattern"></div>
        </div>
    </div>

    <script>
        document.getElementById("registerForm").addEventListener("submit", async e => {
            e.preventDefault();
            const nombre = document.getElementById("nombre").value.trim();
            const cedula = document.getElementById("cedula").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value.trim();
            
            if (!nombre || !cedula || !email || !password) {
                showNotification("Todos los campos son obligatorios", "error");
                return;
            }
            
            if (!document.getElementById("terms").checked) {
                showNotification("Debes aceptar los términos y condiciones", "error");
                return;
            }
            
            // Show loading state
            const button = document.querySelector('.login-button');
            const originalText = button.innerHTML;
            button.innerHTML = '<span>Creando cuenta...</span>';
            button.disabled = true;
            
            try {
                // Debug: mostrar qué se está enviando
                const dataToSend = { nombre, cedula, email, password };
                console.log("Datos a enviar:", dataToSend);
                
                const res = await fetch("http://localhost:3000/register", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(dataToSend)
                });
                
                const result = await res.json();
                console.log("Respuesta del servidor:", result);
                
                if (res.ok) {
                    showNotification("✅ Cuenta creada exitosamente", "success");
                    setTimeout(() => {
                        window.location.href = "login.html";
                    }, 2000);
                } else {
                    showNotification("❌ " + (result.message || "Error al crear la cuenta"), "error");
                }
            } catch (error) {
                showNotification("❌ Error de conexión", "error");
            } finally {
                // Restore button state
                button.innerHTML = originalText;
                button.disabled = false;
            }
        });
        
        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => notification.classList.add('show'), 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>